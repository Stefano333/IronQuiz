{% extends "base.html" %}
{% block title %}Quiz{% endblock %}
{% block user %}{{quiz.logged_user}}{% endblock %}
{% block head %}Quiz{% endblock %}


{% block content %}
{% with message = get_flashed_messages(category_filter=["hint"]) %}
{% if quiz.status == quiz_status_list.NO_QUESTION %}
<h3>Wait for a new question</h3>
{% elif quiz.status == quiz_status_list.USER_CAN_BOOK %}
<form id="booking-form" method="POST">
    <input id="submit-booking" name="submit_booking" type="submit" value="Book answer">
</form>
{% elif quiz.status == quiz_status_list.USER_WAITING_ALLOWANCE_TO_ANSWER or
    quiz.status == quiz_status_list.USER_WAITING_VALIDATION or
    quiz.status == quiz_status_list.USER_WON or
    quiz.status == quiz_status_list.USER_LOST
    %}
{% if message %}
<h3>{{ message.0 }}</h3>
{% endif %}
{% elif quiz.status == quiz_status_list.USER_CAN_ANSWER %}
<h3>{{ quiz.current_question.question }}?</h3>
<form id="submit-answer-form" method="POST" action="quiz/submit_answer/{{quiz.user_booking_status.id}}">
    {{ quiz.answer_form.hidden_tag() }}
    {{ quiz.answer_form.answer }}
    {% for error in quiz.answer_form.answer.errors %}
    <li><span style="color: red;">[{{ error }}]</span></li>
    {% endfor %}
    {{ quiz.answer_form.submit_answer }}
    <input id="submit-answer" name="submit_answer" type="submit" value="submit_answer">
</form>
{% else %}
{% endif %}
{% endwith %}

{{quiz.status}}

{% endblock %}